{"swagger":"2.0","info":{"title":"Cecil APIs","license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"},"version":"0.1"},"host":"127.0.0.1:8080","schemes":["http","https"],"consumes":["application/json"],"produces":["application/json"],"paths":{"/":{"get":{"tags":["root"],"summary":"show root","description":"Show info about API","operationId":"root#show","responses":{"200":{"description":"OK"}},"schemes":["http","https"]}},"/accounts":{"post":{"tags":["account"],"summary":"create account","description":"Create new account","operationId":"account#create","parameters":[{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/CreateAccountPayload"}}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"]}},"/accounts/{account_id}":{"get":{"tags":["account"],"summary":"show account","description":"Show account\n\nRequired security scopes:\n  * `api:access`","operationId":"account#show","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/api_token":{"post":{"tags":["account"],"summary":"verify account","description":"Verify account and get API token","operationId":"account#verify","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/VerifyAccountPayload"}}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"]}},"/accounts/{account_id}/cloudaccounts":{"post":{"tags":["cloudaccount"],"summary":"add cloudaccount","description":"Add new cloudaccount\n\nRequired security scopes:\n  * `api:access`","operationId":"cloudaccount#add","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/AddCloudaccountPayload"}}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/cloudaccounts/{cloudaccount_id}":{"patch":{"tags":["cloudaccount"],"summary":"update cloudaccount","description":"Update a cloudaccount\n\nRequired security scopes:\n  * `api:access`","operationId":"cloudaccount#update","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"path","description":"CloudAccount ID","required":true,"type":"integer","minimum":1},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/UpdateCloudaccountPayload"}}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/cloudaccounts/{cloudaccount_id}/leases":{"get":{"tags":["leases"],"summary":"listLeasesForCloudaccount leases","description":"List all leases for cloudAccount\n\nRequired security scopes:\n  * `api:access`","operationId":"leases#listLeasesForCloudaccount","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"path","description":"CloudAccount ID","required":true,"type":"integer","minimum":1},{"name":"terminated","in":"query","required":false,"type":"boolean"}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/cloudaccounts/{cloudaccount_id}/leases/{lease_id}":{"get":{"tags":["leases"],"summary":"show leases","description":"Show a lease\n\nRequired security scopes:\n  * `api:access`","operationId":"leases#show","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"path","description":"CloudAccount ID","required":true,"type":"integer","minimum":1},{"name":"lease_id","in":"path","description":"Lease ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/cloudaccounts/{cloudaccount_id}/leases/{lease_id}/delete":{"post":{"tags":["leases"],"summary":"deleteFromDB leases","description":"Delete a lease from DB\n\nRequired security scopes:\n  * `api:access`","operationId":"leases#deleteFromDB","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"path","description":"CloudAccount ID","required":true,"type":"integer","minimum":1},{"name":"lease_id","in":"path","description":"Lease ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/cloudaccounts/{cloudaccount_id}/leases/{lease_id}/expiry":{"post":{"tags":["leases"],"summary":"setExpiry leases","description":"Set expiry of a lease\n\nRequired security scopes:\n  * `api:access`","operationId":"leases#setExpiry","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"path","description":"CloudAccount ID","required":true,"type":"integer","minimum":1},{"name":"expires_at","in":"query","description":"Target expiry datetime","required":true,"type":"string"},{"name":"lease_id","in":"path","description":"Lease ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/cloudaccounts/{cloudaccount_id}/leases/{lease_id}/terminate":{"post":{"tags":["leases"],"summary":"terminate leases","description":"Terminate a lease\n\nRequired security scopes:\n  * `api:access`","operationId":"leases#terminate","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"path","description":"CloudAccount ID","required":true,"type":"integer","minimum":1},{"name":"lease_id","in":"path","description":"Lease ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/cloudaccounts/{cloudaccount_id}/owners":{"post":{"tags":["cloudaccount"],"summary":"addEmailToWhitelist cloudaccount","description":"Add new email to owner tag whitelist\n\nRequired security scopes:\n  * `api:access`","operationId":"cloudaccount#addEmailToWhitelist","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"path","description":"CloudAccount ID","required":true,"type":"integer","minimum":1},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/AddEmailToWhitelistCloudaccountPayload"}}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/cloudaccounts/{cloudaccount_id}/regions":{"get":{"tags":["cloudaccount"],"summary":"listRegions cloudaccount","description":"List all regions and their status\n\nRequired security scopes:\n  * `api:access`","operationId":"cloudaccount#listRegions","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"path","description":"CloudAccount ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/cloudaccounts/{cloudaccount_id}/subscribe-sns-to-sqs":{"post":{"tags":["cloudaccount"],"summary":"subscribeSNSToSQS cloudaccount","description":"Subscribe SNS to SQS\n\nRequired security scopes:\n  * `api:access`","operationId":"cloudaccount#subscribeSNSToSQS","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"path","description":"CloudAccount ID","required":true,"type":"integer","minimum":1},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/SubscribeSNSToSQSCloudaccountPayload"}}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/cloudaccounts/{cloudaccount_id}/tenant-aws-initial-setup.template":{"get":{"tags":["cloudaccount"],"summary":"downloadInitialSetupTemplate cloudaccount","description":"Download AWS initial setup cloudformation template\n\nRequired security scopes:\n  * `api:access`","operationId":"cloudaccount#downloadInitialSetupTemplate","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"path","description":"CloudAccount ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/cloudaccounts/{cloudaccount_id}/tenant-aws-region-setup.template":{"get":{"tags":["cloudaccount"],"summary":"downloadRegionSetupTemplate cloudaccount","description":"Download AWS region setup cloudformation template\n\nRequired security scopes:\n  * `api:access`","operationId":"cloudaccount#downloadRegionSetupTemplate","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"path","description":"CloudAccount ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/leases":{"get":{"tags":["leases"],"summary":"listLeasesForAccount leases","description":"List all leases for account\n\nRequired security scopes:\n  * `api:access`","operationId":"leases#listLeasesForAccount","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"terminated","in":"query","required":false,"type":"boolean"}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/leases/{lease_id}":{"get":{"tags":["leases"],"summary":"show leases","description":"Show a lease\n\nRequired security scopes:\n  * `api:access`","operationId":"leases#show#1","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"query","description":"CloudAccount ID","required":false,"type":"integer","minimum":1},{"name":"lease_id","in":"path","description":"Lease ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/leases/{lease_id}/delete":{"post":{"tags":["leases"],"summary":"deleteFromDB leases","description":"Delete a lease from DB\n\nRequired security scopes:\n  * `api:access`","operationId":"leases#deleteFromDB#1","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"query","description":"CloudAccount ID","required":false,"type":"integer","minimum":1},{"name":"lease_id","in":"path","description":"Lease ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/leases/{lease_id}/expiry":{"post":{"tags":["leases"],"summary":"setExpiry leases","description":"Set expiry of a lease\n\nRequired security scopes:\n  * `api:access`","operationId":"leases#setExpiry#1","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"query","description":"CloudAccount ID","required":false,"type":"integer","minimum":1},{"name":"expires_at","in":"query","description":"Target expiry datetime","required":true,"type":"string"},{"name":"lease_id","in":"path","description":"Lease ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/leases/{lease_id}/terminate":{"post":{"tags":["leases"],"summary":"terminate leases","description":"Terminate a lease\n\nRequired security scopes:\n  * `api:access`","operationId":"leases#terminate#1","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"cloudaccount_id","in":"query","description":"CloudAccount ID","required":false,"type":"integer","minimum":1},{"name":"lease_id","in":"path","description":"Lease ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/mailer_config":{"post":{"tags":["account"],"summary":"mailerConfig account","description":"Configure mailer\n\nRequired security scopes:\n  * `api:access`","operationId":"account#mailerConfig","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/MailerConfigAccountPayload"}}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/accounts/{account_id}/slack_config":{"post":{"tags":["account"],"summary":"slackConfig account","description":"Configure slack\n\nRequired security scopes:\n  * `api:access`","operationId":"account#slackConfig","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1},{"name":"payload","in":"body","required":true,"schema":{"$ref":"#/definitions/SlackConfigAccountPayload"}}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]},"delete":{"tags":["account"],"summary":"removeSlack account","description":"Remove slack\n\nRequired security scopes:\n  * `api:access`","operationId":"account#removeSlack","parameters":[{"name":"account_id","in":"path","description":"Account ID","required":true,"type":"integer","minimum":1}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"],"security":[{"jwt":["api:access"]}]}},"/email_action/leases/{lease_uuid}/{instance_id}/{action}":{"get":{"tags":["email_action"],"summary":"actions email_action","description":"Perform an action on a lease","operationId":"email_action#actions","parameters":[{"name":"action","in":"path","description":"Action to be peformed on the lease","required":true,"type":"string","enum":["approve","terminate","extend"]},{"name":"instance_id","in":"path","description":"ID of the lease","required":true,"type":"string","minLength":1},{"name":"lease_uuid","in":"path","description":"UUID of the lease","required":true,"type":"string"},{"name":"sig","in":"query","description":"The signature of this link","required":true,"type":"string","minLength":30},{"name":"tok","in":"query","description":"The token_once of this link","required":true,"type":"string","minLength":30}],"responses":{"200":{"description":"OK"}},"schemes":["http","https"]}},"/swagger.json":{"get":{"summary":"Download goa/swagger/swagger.json","operationId":"swagger#/swagger.json","responses":{"200":{"description":"File downloaded","schema":{"type":"file"}}},"schemes":["http","https"]}}},"definitions":{"AddCloudaccountPayload":{"title":"AddCloudaccountPayload","type":"object","properties":{"aws_id":{"type":"string","minLength":1},"default_lease_duration":{"type":"string"}},"required":["aws_id"]},"AddEmailToWhitelistCloudaccountPayload":{"title":"AddEmailToWhitelistCloudaccountPayload","type":"object","properties":{"email":{"type":"string","format":"email"}},"required":["email"]},"CreateAccountPayload":{"title":"CreateAccountPayload","type":"object","properties":{"email":{"type":"string","format":"email"},"name":{"type":"string","minLength":1,"maxLength":30},"surname":{"type":"string","minLength":1,"maxLength":30}},"required":["email","name","surname"]},"MailerConfigAccountPayload":{"title":"MailerConfigAccountPayload","type":"object","properties":{"api_key":{"type":"string","minLength":1},"domain":{"type":"string","minLength":1},"from_name":{"type":"string","minLength":1},"public_api_key":{"type":"string","minLength":1}},"required":["domain","api_key","public_api_key","from_name"]},"SlackConfigAccountPayload":{"title":"SlackConfigAccountPayload","type":"object","properties":{"channel_id":{"type":"string","minLength":1},"token":{"type":"string","minLength":1}},"required":["token","channel_id"]},"SubscribeSNSToSQSCloudaccountPayload":{"title":"SubscribeSNSToSQSCloudaccountPayload","type":"object","properties":{"regions":{"type":"array","items":{"type":"string"}}},"required":["regions"]},"UpdateCloudaccountPayload":{"title":"UpdateCloudaccountPayload","type":"object","properties":{"aws_id":{"type":"string","minLength":1},"default_lease_duration":{"type":"string"}},"required":["default_lease_duration"]},"VerifyAccountPayload":{"title":"VerifyAccountPayload","type":"object","properties":{"verification_token":{"type":"string","minLength":108}},"required":["verification_token"]}},"securityDefinitions":{"jwt":{"type":"apiKey","description":"\n\n**Security Scopes**:\n  * `api:access`: API access","name":"Authorization","in":"header"}},"externalDocs":{"description":"Cecil APIs docs","url":""}}